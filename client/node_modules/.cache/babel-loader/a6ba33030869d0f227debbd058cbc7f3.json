{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Justin\\\\Desktop\\\\Coding\\\\mycookbook prototype\\\\mycookbookver1\\\\client\\\\src\\\\components\\\\RecipeForm\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\nimport { ADD_RECIPE } from '../../utils/mutations';\nimport { QUERY_RECIPES, QUERY_MYPROFILE } from '../../utils/queries';\nimport Auth from '../../utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RecipeForm = () => {\n  _s();\n\n  const [newRecipe, setNewRecipe] = useState({\n    title: '',\n    servings: '',\n    totalTime: '',\n    ingredients: [''],\n    directions: ['']\n  });\n  const [addRecipe, {\n    error,\n    data\n  }] = useMutation(ADD_RECIPE, {\n    update(cache, {\n      data: {\n        addRecipe\n      }\n    }) {\n      try {\n        const {\n          recipes\n        } = cache.readQuery({\n          query: QUERY_RECIPES\n        });\n        cache.writeQuery({\n          query: QUERY_RECIPES,\n          data: {\n            recipes: [addRecipe, ...recipes]\n          }\n        });\n      } catch (e) {\n        console.error(e);\n      }\n\n      const {\n        myprofile\n      } = cache.readQuery({\n        query: QUERY_MYPROFILE\n      });\n      cache.writeQuery({\n        query: QUERY_MYPROFILE,\n        data: {\n          myprofile: { ...myprofile,\n            recipes: [...myprofile.recipes, addRecipe]\n          }\n        }\n      });\n    }\n\n  });\n\n  const handleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n\n    if (name === 'ingredients') {\n      let ingredientsarray = [];\n      let testingredientsarray = value.split(\". \");\n\n      for (let a = 0; a < testingredientsarray.length; a++) {\n        ingredientsarray.push(testingredientsarray[a]);\n        setNewRecipe({\n          ingredients: ingredientsarray\n        });\n      }\n\n      ;\n    }\n\n    setNewRecipe({ ...newRecipe,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      const {\n        data\n      } = await addRecipe({\n        variables: { ...newRecipe\n        }\n      });\n      setNewRecipe({\n        title: '',\n        servings: '',\n        totalTime: '',\n        ingredients: '',\n        directions: ''\n      });\n      Auth.login(data.addRecipe);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"recipeformsection\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"recipeform\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Recipe Name\",\n        name: \"title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Servings\",\n        name: \"servings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Total Time to Cook\",\n        name: \"totalTime\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Ingredients\",\n        name: \"ingredients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Instructions\",\n        name: \"directions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"recipeformbutton\",\n          type: \"submit\",\n          children: \"Add Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n\n_s(RecipeForm, \"9PZTb9JCji9wX8K7hUVR5XCwPR8=\", false, function () {\n  return [useMutation];\n});\n\n_c = RecipeForm;\nexport default RecipeForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecipeForm\");","map":{"version":3,"sources":["C:/Users/Justin/Desktop/Coding/mycookbook prototype/mycookbookver1/client/src/components/RecipeForm/index.js"],"names":["React","useState","Link","useMutation","ADD_RECIPE","QUERY_RECIPES","QUERY_MYPROFILE","Auth","RecipeForm","newRecipe","setNewRecipe","title","servings","totalTime","ingredients","directions","addRecipe","error","data","update","cache","recipes","readQuery","query","writeQuery","e","console","myprofile","handleChange","event","name","value","target","ingredientsarray","testingredientsarray","split","a","length","push","handleSubmit","preventDefault","variables","login"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useMutation } from '@apollo/client';\r\n\r\nimport { ADD_RECIPE } from '../../utils/mutations';\r\nimport { QUERY_RECIPES, QUERY_MYPROFILE } from '../../utils/queries';\r\n\r\nimport Auth from '../../utils/auth';\r\n\r\nconst RecipeForm = () => {\r\n\r\n    const [newRecipe, setNewRecipe] = useState({\r\n        title: '',\r\n        servings: '',\r\n        totalTime: '',\r\n        ingredients: [''],\r\n        directions: [''],\r\n    });\r\n\r\n    const [addRecipe, { error, data }] = useMutation(ADD_RECIPE, {\r\n        update(cache, { data: {addRecipe} }) {\r\n            try {\r\n                const { recipes } = cache.readQuery({ query: QUERY_RECIPES });\r\n\r\n                cache.writeQuery({\r\n                    query: QUERY_RECIPES,\r\n                    data: { recipes: [addRecipe, ...recipes] },\r\n                });\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n\r\n            const { myprofile } = cache.readQuery({ query: QUERY_MYPROFILE });\r\n            cache.writeQuery({\r\n                query: QUERY_MYPROFILE,\r\n                data: { myprofile: { ...myprofile, recipes: [...myprofile.recipes, addRecipe] } },\r\n            });\r\n        },\r\n    });\r\n\r\n    const handleChange = (event) => {\r\n        const { name, value } = event.target;\r\n\r\n        if (name === 'ingredients') {\r\n            let ingredientsarray = [];\r\n            let testingredientsarray = value.split(\". \");\r\n            for (let a = 0; a < testingredientsarray.length; a++) {\r\n                ingredientsarray.push(testingredientsarray[a]);\r\n                setNewRecipe({\r\n                    ingredients: ingredientsarray\r\n                })\r\n            };\r\n        }\r\n\r\n        setNewRecipe({\r\n            ...newRecipe,\r\n            [name]: value,\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        try {\r\n            const { data } = await addRecipe({\r\n                variables: { ...newRecipe },\r\n            });\r\n\r\n            setNewRecipe({\r\n                title: '',\r\n                servings: '',\r\n                totalTime: '',\r\n                ingredients: '',\r\n                directions: '',\r\n            });\r\n            \r\n            Auth.login(data.addRecipe)\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"recipeformsection\">\r\n            <form className=\"recipeform\">\r\n                <input placeholder=\"Recipe Name\" name=\"title\"></input>\r\n                <input placeholder=\"Servings\" name=\"servings\"></input>\r\n                <input placeholder=\"Total Time to Cook\" name=\"totalTime\"></input>\r\n                <textarea placeholder=\"Ingredients\" name=\"ingredients\"></textarea>\r\n                <textarea placeholder=\"Instructions\" name=\"directions\"></textarea>\r\n                <div className=\"\">\r\n                    <button className =\"recipeformbutton\" type=\"submit\">\r\n                        Add Recipe\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RecipeForm;"]},"metadata":{},"sourceType":"module"}