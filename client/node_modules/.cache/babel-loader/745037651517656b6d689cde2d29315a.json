{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Justin\\\\Desktop\\\\Coding\\\\mycookbook prototype\\\\mycookbookver5\\\\client\\\\src\\\\pages\\\\SingleRecipe.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { ADD_RECIPE } from '../utils/mutations';\nimport { QUERY_SINGLE_RECIPE, QUERY_MYPROFILE } from '../utils/queries';\nimport { Image } from 'cloudinary-react';\nimport Auth from '../utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SingleRecipe = () => {\n  _s();\n\n  const {\n    recipeId\n  } = useParams();\n  const {\n    loading,\n    data\n  } = useQuery(QUERY_SINGLE_RECIPE, {\n    variables: {\n      recipeId: recipeId\n    }\n  });\n  const recipe = (data === null || data === void 0 ? void 0 : data.recipe) || {}; // console.log(recipe)\n  // console.log(recipe.title);\n  // THIS SHOULD, ON PAPER ADD THE CURRENT OBJECT WHICH IS THE 'recipe'\n  // FROM ABOVE AND ADD TO THE USER THAT IS CURRENTLY LOGGED. THAT'S WHAT THE\n  // BELOW CODE SHOULD DO\n  // const [ addedrecipe , setAddedrecipe ] = useState({\n  //     title: 'hello'\n  // });\n  // console.log(\"testing\");\n  // console.log(addedrecipe);\n\n  const [addRecipe, {\n    error\n  }] = useMutation(ADD_RECIPE, {\n    update(cache, {\n      data: {\n        addRecipe\n      }\n    }) {\n      const {\n        myprofile\n      } = cache.readQuery({\n        query: QUERY_MYPROFILE\n      });\n      cache.writeQuery({\n        query: QUERY_MYPROFILE,\n        data: {\n          myprofile: { ...myprofile,\n            recipes: [...myprofile.recipes, addRecipe]\n          }\n        }\n      });\n    }\n\n  });\n\n  const handleAddto = async event => {\n    event.preventDefault();\n\n    try {\n      const {\n        data\n      } = await addRecipe({\n        variables: { ...recipe\n        }\n      });\n      console.log(\"success\");\n    } catch (err) {\n      console.log(\"it didnt work\");\n      console.error(err);\n    }\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"singlerecipepage\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"titlecard\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: recipe.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), Auth.loggedIn() ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddto,\n            enabled: true,\n            children: \"Add to Cookbook\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 29\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: true,\n            children: \"Add to Cookbook\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"generalInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Category: \", recipe.category]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Number of Servings: \", recipe.servings]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total Cook Time: \", recipe.totalTime]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"middlepart\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ingredientsList\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Ingredients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), recipe.ingredients.map(ingredient => /*#__PURE__*/_jsxDEV(\"p\", {\n            children: ingredient\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recipeImg\",\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            cloudName: \"du119g90a\",\n            public_id: recipe.imageid\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"directionsList\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Directions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), recipe.directions.map(direction => /*#__PURE__*/_jsxDEV(\"p\", {\n          children: direction\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SingleRecipe, \"lpVOpoJQuzKHZpIF4oQgdLrscK0=\", false, function () {\n  return [useParams, useQuery, useMutation];\n});\n\n_c = SingleRecipe;\nexport default SingleRecipe;\n\nvar _c;\n\n$RefreshReg$(_c, \"SingleRecipe\");","map":{"version":3,"sources":["C:/Users/Justin/Desktop/Coding/mycookbook prototype/mycookbookver5/client/src/pages/SingleRecipe.js"],"names":["React","useState","useParams","useQuery","useMutation","ADD_RECIPE","QUERY_SINGLE_RECIPE","QUERY_MYPROFILE","Image","Auth","SingleRecipe","recipeId","loading","data","variables","recipe","addRecipe","error","update","cache","myprofile","readQuery","query","writeQuery","recipes","handleAddto","event","preventDefault","console","log","err","title","loggedIn","category","servings","totalTime","ingredients","map","ingredient","imageid","directions","direction"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { useParams } from 'react-router-dom';\r\nimport { useQuery, useMutation } from '@apollo/client';\r\n\r\nimport { ADD_RECIPE } from '../utils/mutations';\r\nimport { QUERY_SINGLE_RECIPE, QUERY_MYPROFILE } from '../utils/queries';\r\n\r\nimport { Image } from 'cloudinary-react';\r\n\r\nimport Auth from '../utils/auth';\r\n\r\nconst SingleRecipe = () => {\r\n    const { recipeId } = useParams();\r\n\r\n    const { loading, data } = useQuery(QUERY_SINGLE_RECIPE, {\r\n        variables: { recipeId: recipeId },\r\n    });\r\n    const recipe = data?.recipe || {};\r\n    // console.log(recipe)\r\n    // console.log(recipe.title);\r\n\r\n    // THIS SHOULD, ON PAPER ADD THE CURRENT OBJECT WHICH IS THE 'recipe'\r\n    // FROM ABOVE AND ADD TO THE USER THAT IS CURRENTLY LOGGED. THAT'S WHAT THE\r\n    // BELOW CODE SHOULD DO\r\n\r\n    // const [ addedrecipe , setAddedrecipe ] = useState({\r\n    //     title: 'hello'\r\n    // });\r\n    // console.log(\"testing\");\r\n    // console.log(addedrecipe);\r\n\r\n    const [addRecipe, { error }] = useMutation(ADD_RECIPE, {\r\n        update(cache, { data: { addRecipe } }) {\r\n\r\n            const { myprofile } = cache.readQuery({ query: QUERY_MYPROFILE });\r\n            cache.writeQuery({\r\n                query: QUERY_MYPROFILE,\r\n                data: { myprofile: {\r\n                    ...myprofile,\r\n                    recipes: [ ...myprofile.recipes, addRecipe]\r\n                }},\r\n            });\r\n        },\r\n    });\r\n\r\n    const handleAddto = async (event) => {\r\n        event.preventDefault();\r\n\r\n        try {\r\n            const { data } = await addRecipe({\r\n                variables: {\r\n                    ...recipe,\r\n                }\r\n            });\r\n\r\n            console.log(\"success\");\r\n        } catch (err) {\r\n            console.log(\"it didnt work\");\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n    return (\r\n        <div className=\"singlerecipepage\">\r\n            \r\n            <div>\r\n                <div className=\"titlecard\">\r\n                    <h1>{recipe.title}</h1>\r\n                    {Auth.loggedIn() ? (\r\n                        <>\r\n                            <button onClick={handleAddto} enabled>Add to Cookbook</button>\r\n                        </>\r\n                    ): (\r\n                        <>\r\n                            <button disabled>Add to Cookbook</button>\r\n                        </>\r\n                    )}\r\n                </div>\r\n                <hr/>\r\n                <div className=\"generalInfo\">\r\n                    <p>Category: {recipe.category}</p>\r\n                    <p>Number of Servings: {recipe.servings}</p>\r\n                    <p>Total Cook Time: {recipe.totalTime}</p>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"middlepart\">\r\n                    <div className=\"ingredientsList\">\r\n                        <h1>Ingredients</h1>\r\n                        {recipe.ingredients.map((ingredient) => (\r\n                            <p>{ingredient}</p>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"recipeImg\">\r\n                        <Image cloudName=\"du119g90a\" public_id={recipe.imageid} />\r\n                    </div>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"directionsList\">\r\n                    <h1>Directions</h1>\r\n                    {recipe.directions.map((direction) => (\r\n                        <p>{direction}</p>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SingleRecipe;"]},"metadata":{},"sourceType":"module"}