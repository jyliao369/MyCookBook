{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Justin/Desktop/Coding/MyCookBook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Justin/Desktop/Coding/MyCookBook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:/Users/Justin/Desktop/Coding/MyCookBook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/Justin/Desktop/Coding/MyCookBook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Justin/Desktop/Coding/MyCookBook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';// import { useContext } from 'react';\nimport{useState}from'react';// import { Link } from 'react-router-dom';\nimport{useMutation}from'@apollo/client';import{ADD_RECIPE}from'../../utils/mutations';import{QUERY_RECIPES,QUERY_MYPROFILE}from'../../utils/queries';import Axios from'axios';// import { Image } from 'cloudinary-react';\nimport Auth from'../../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecipeForm=function RecipeForm(){var _useState=useState({title:'',category:'',servings:'',totalTime:'',ingredients:[''],directions:[''],imageid:''}),_useState2=_slicedToArray(_useState,2),newRecipe=_useState2[0],setNewRecipe=_useState2[1];console.log(\"New Recipe\");console.log(newRecipe);// console.log(newRecipe.directions);\n// THIS SHOULD HANDLE THE IMAGES BEING UPLOADED\n// IT SHOULD ALSO GENERATE PUBLIC ID FOR THE IMAGE\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),imageSelected=_useState4[0],setImageSelected=_useState4[1];// const [imageID, setImageID] = useState(\"\");\nvar uploadImage=function uploadImage(file){var formData=new FormData();formData.append(\"file\",file);formData.append(\"upload_preset\",\"yun8815z\");Axios.post(\"https://api.cloudinary.com/v1_1/du119g90a/image/upload\",formData).then(function(response){console.log(\"response\");console.log(response);console.log(\"public ID\");console.log(response.data.public_id);setNewRecipe(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{imageid:response.data.public_id});});});};var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;if(name===\"title\"){setNewRecipe(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{title:value});});}if(name===\"category\"){setNewRecipe(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{category:value});});}if(name===\"servings\"){setNewRecipe(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{servings:value});});}if(name===\"totalTime\"){setNewRecipe(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{totalTime:value});});}if(name==='ingredients'){(function(){var ingredientsarray=[];var testingredientsarray=value.split(\"\\n\");for(var a=0;a<testingredientsarray.length;a++){ingredientsarray.push(testingredientsarray[a]);setNewRecipe(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{ingredients:ingredientsarray});});};})();}if(name==='directions'){(function(){var directionssarray=[];var testdirectionsarray=value.split(\"\\n\");for(var b=0;b<testdirectionsarray.length;b++){directionssarray.push(testdirectionsarray[b]);setNewRecipe(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{directions:directionssarray});});};})();}};var _useMutation=useMutation(ADD_RECIPE,{update:function update(cache,_ref){var addRecipe=_ref.data.addRecipe;try{var _cache$readQuery=cache.readQuery({query:QUERY_RECIPES}),recipes=_cache$readQuery.recipes;cache.writeQuery({query:QUERY_RECIPES,data:{recipes:[addRecipe].concat(_toConsumableArray(recipes))}});}catch(e){console.error(e);}var _cache$readQuery2=cache.readQuery({query:QUERY_MYPROFILE}),myprofile=_cache$readQuery2.myprofile;cache.writeQuery({query:QUERY_MYPROFILE,data:{myprofile:_objectSpread(_objectSpread({},myprofile),{},{recipes:[].concat(_toConsumableArray(myprofile.recipes),[addRecipe])})}});}}),_useMutation2=_slicedToArray(_useMutation,2),addRecipe=_useMutation2[0],error=_useMutation2[1].error;var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _yield$addRecipe,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return addRecipe({variables:_objectSpread(_objectSpread({},newRecipe),{},{postAuthor:Auth.getProfile().data.email})});case 4:_yield$addRecipe=_context.sent;data=_yield$addRecipe.data;setNewRecipe({title:'',category:'',servings:'',totalTime:'',ingredients:'',directions:'',imageid:''});// Auth.login(data.addRecipe)\n_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"recipeformsection\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"recipeform\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tophalf\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"basicinfo\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Recipe Name\",name:\"title\",onChange:handleChange}),/*#__PURE__*/_jsxs(\"select\",{placeholder:\"Category\",name:\"category\",onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose a Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Appetizer\",children:\"Appetizer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Entres\",children:\"Entres\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Dessert\",children:\"Dessert\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Drinks\",children:\"Drinks\"})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Servings\",name:\"servings\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Total Time in Mins\",name:\"totalTime\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"uploadImage\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"previewImage\",children:imageSelected?/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(imageSelected),className:\"imagepreview\",alt:\"\"}):/*#__PURE__*/_jsx(\"h1\",{children:\"No Image\"})}),/*#__PURE__*/_jsx(\"input\",{title:\" \",type:\"file\",onChange:function onChange(event){uploadImage(event.target.files[0]);setImageSelected(event.target.files[0]);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ingred-instr\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Ingredients\",name:\"ingredients\",onChange:handleChange}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Instructions\",name:\"directions\",onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"button\",{className:\"recipeformbutton\",type:\"submit\",children:\"Add Recipe\"})})]})});};export default RecipeForm;","map":{"version":3,"sources":["C:/Users/Justin/Desktop/Coding/MyCookBook/client/src/components/RecipeForm/index.js"],"names":["React","useState","useMutation","ADD_RECIPE","QUERY_RECIPES","QUERY_MYPROFILE","Axios","Auth","RecipeForm","title","category","servings","totalTime","ingredients","directions","imageid","newRecipe","setNewRecipe","console","log","imageSelected","setImageSelected","uploadImage","file","formData","FormData","append","post","then","response","data","public_id","prevState","handleChange","event","target","name","value","ingredientsarray","testingredientsarray","split","a","length","push","directionssarray","testdirectionsarray","b","update","cache","addRecipe","readQuery","query","recipes","writeQuery","e","error","myprofile","handleSubmit","preventDefault","variables","postAuthor","getProfile","email","URL","createObjectURL","files"],"mappings":"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","sourcesContent":["import React from 'react';\r\n// import { useContext } from 'react';\r\nimport { useState } from 'react';\r\n\r\n// import { Link } from 'react-router-dom';\r\nimport { useMutation } from '@apollo/client';\r\n\r\nimport { ADD_RECIPE } from '../../utils/mutations';\r\nimport { QUERY_RECIPES, QUERY_MYPROFILE } from '../../utils/queries';\r\n\r\nimport Axios from 'axios';\r\n// import { Image } from 'cloudinary-react';\r\n\r\nimport Auth from '../../utils/auth';\r\n\r\nconst RecipeForm = () => {\r\n\r\n    const [newRecipe, setNewRecipe] = useState({\r\n        title: '',\r\n        category: '',\r\n        servings: '',\r\n        totalTime: '',\r\n        ingredients: [''],\r\n        directions: [''],\r\n        imageid: '',\r\n    });\r\n\r\n    console.log(\"New Recipe\");\r\n    console.log(newRecipe);\r\n    // console.log(newRecipe.directions);\r\n\r\n    // THIS SHOULD HANDLE THE IMAGES BEING UPLOADED\r\n    // IT SHOULD ALSO GENERATE PUBLIC ID FOR THE IMAGE\r\n    const [imageSelected, setImageSelected] = useState(\"\");\r\n    // const [imageID, setImageID] = useState(\"\");\r\n\r\n    const uploadImage = (file) => {\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        formData.append(\"upload_preset\", \"yun8815z\");\r\n\r\n        Axios.post(\r\n            \"https://api.cloudinary.com/v1_1/du119g90a/image/upload\", \r\n            formData\r\n        ).then((response) => {\r\n            console.log(\"response\");\r\n            console.log(response);\r\n            console.log(\"public ID\");\r\n            console.log(response.data.public_id);\r\n            \r\n            setNewRecipe((prevState) => ({\r\n\r\n                ...prevState,\r\n                imageid: response.data.public_id,\r\n            }))\r\n        });\r\n    };\r\n\r\n\r\n    const handleChange = (event) => {\r\n        const { name, value } = event.target;\r\n\r\n        if (name === \"title\") {\r\n            setNewRecipe((prevState) => ({\r\n\r\n                ...prevState,\r\n                title: value,\r\n            }))\r\n        }\r\n\r\n        if (name === \"category\") {\r\n            setNewRecipe((prevState) => ({\r\n                \r\n                ...prevState,\r\n                category: value,\r\n            }))\r\n        }\r\n\r\n        if (name === \"servings\") {\r\n            setNewRecipe((prevState) => ({\r\n\r\n                ...prevState,\r\n                servings: value,\r\n            }))\r\n        }\r\n\r\n        if (name === \"totalTime\") {\r\n            setNewRecipe((prevState) => ({\r\n\r\n                ...prevState,\r\n                totalTime: value,\r\n            }))\r\n        }\r\n\r\n        if (name === 'ingredients') {\r\n            let ingredientsarray = [];\r\n            let testingredientsarray = value.split(\"\\n\");\r\n            for (let a = 0; a < testingredientsarray.length; a++) {\r\n                ingredientsarray.push(testingredientsarray[a]);\r\n                setNewRecipe((prevState) => ({\r\n                    ...prevState,\r\n                    ingredients: ingredientsarray\r\n                }))\r\n            };\r\n        }\r\n\r\n        if (name === 'directions') {\r\n            let directionssarray = [];\r\n            let testdirectionsarray = value.split(\"\\n\");\r\n            for (let b = 0; b < testdirectionsarray.length; b++) {\r\n                directionssarray.push(testdirectionsarray[b]);\r\n                setNewRecipe((prevState) => ({\r\n                    ...prevState,\r\n                    directions: directionssarray\r\n                }))\r\n            };\r\n        }\r\n    };\r\n\r\n    const [addRecipe, { error }] = useMutation(ADD_RECIPE, {\r\n        update(cache, { data: { addRecipe } }) {\r\n            try {\r\n                const { recipes } = cache.readQuery({ query: QUERY_RECIPES });\r\n\r\n                cache.writeQuery({\r\n                    query: QUERY_RECIPES,\r\n                    data: { recipes: [addRecipe, ...recipes] },\r\n                });\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n\r\n            const { myprofile } = cache.readQuery({ query: QUERY_MYPROFILE });\r\n            cache.writeQuery({\r\n                query: QUERY_MYPROFILE,\r\n                data: { myprofile: { ...myprofile, recipes: [...myprofile.recipes, addRecipe] } },\r\n            });\r\n        },\r\n    });\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        try {\r\n            const { data } = await addRecipe({\r\n                variables: { \r\n                    ...newRecipe, \r\n                    postAuthor: Auth.getProfile().data.email,\r\n                },\r\n            });\r\n\r\n            setNewRecipe({\r\n                title: '',\r\n                category: '',\r\n                servings: '',\r\n                totalTime: '',\r\n                ingredients: '',\r\n                directions: '',\r\n                imageid: '',\r\n            });\r\n            \r\n            // Auth.login(data.addRecipe)\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"recipeformsection\">\r\n            \r\n            <form onSubmit={handleSubmit} className=\"recipeform\">\r\n                <div className=\"tophalf\">\r\n                    <div className=\"basicinfo\">\r\n                        <input placeholder=\"Recipe Name\" name=\"title\" onChange={handleChange}></input>\r\n                        <select placeholder=\"Category\" name=\"category\" onChange={handleChange}>\r\n                            <option value=\"\">Choose a Category</option>\r\n                            <option value=\"Appetizer\">Appetizer</option>\r\n                            <option value=\"Entres\">Entres</option>\r\n                            <option value=\"Dessert\">Dessert</option>\r\n                            <option value=\"Drinks\">Drinks</option>\r\n                        </select>\r\n                        <input placeholder=\"Servings\" name=\"servings\" onChange={handleChange}></input>\r\n                        <input placeholder=\"Total Time in Mins\" name=\"totalTime\" onChange={handleChange}></input>\r\n                    </div>\r\n                    <div className=\"uploadImage\">\r\n                        <div className=\"previewImage\">\r\n                            {imageSelected ? (\r\n                                <img src={URL.createObjectURL(imageSelected)} className=\"imagepreview\" alt=\"\"></img>\r\n                            ) : (\r\n                                <h1>No Image</h1>\r\n                            )}\r\n                        </div>\r\n                        <input \r\n                            title=\" \"\r\n                            type=\"file\" \r\n                            onChange={(event) => {\r\n                                uploadImage(event.target.files[0]);\r\n                                setImageSelected(event.target.files[0]);\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"ingred-instr\">\r\n                    <textarea placeholder=\"Ingredients\" name=\"ingredients\" onChange={handleChange}></textarea>\r\n                    <textarea placeholder=\"Instructions\" name=\"directions\" onChange={handleChange}></textarea>\r\n                </div>\r\n                <div className=\"\">\r\n                    <button className=\"recipeformbutton\" type=\"submit\">\r\n                        Add Recipe\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RecipeForm;"]},"metadata":{},"sourceType":"module"}