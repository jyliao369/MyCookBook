{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Justin\\\\Desktop\\\\Coding\\\\mycookbook prototype\\\\mycookbookver1\\\\client\\\\src\\\\pages\\\\SingleRecipe.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { ADD_RECIPE } from '../utils/mutations';\nimport { QUERY_SINGLE_RECIPE, QUERY_MYPROFILE } from '../utils/queries';\nimport Auth from '../utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SingleRecipe = () => {\n  _s();\n\n  const {\n    recipeId\n  } = useParams();\n  const {\n    loading,\n    data\n  } = useQuery(QUERY_SINGLE_RECIPE, {\n    variables: {\n      recipeId: recipeId\n    }\n  });\n  const recipe = (data === null || data === void 0 ? void 0 : data.recipe) || {}; // console.log(recipe)\n  // THIS SHOULD, ON PAPER ADD THE CURRENT OBJECT WHICH IS THE 'recipe'\n  // FROM ABOVE AND ADD TO THE USER THAT IS CURRENTLY LOGGED. THAT'S WHAT THE\n  // BELOW CODE SHOULD DO\n\n  const [addRecipe, {\n    error\n  }] = useMutation(ADD_RECIPE, {\n    update(cache, {\n      data: {\n        addRecipe\n      }\n    }) {\n      const {\n        myprofile\n      } = cache.readQuery({\n        query: QUERY_MYPROFILE\n      });\n      cache.writeQuery({\n        query: QUERY_MYPROFILE,\n        data: {\n          myprofile: { ...myprofile,\n            recipes: [...myprofile.recipes, addRecipe]\n          }\n        }\n      });\n    }\n\n  });\n\n  const handleAddto = async event => {\n    event.preventDefault();\n\n    try {\n      const {\n        data\n      } = await addRecipe({\n        variables: {\n          recipe\n        }\n      });\n      console.log(\"success\");\n    } catch (err) {\n      console.log(\"it didnt work\");\n      console.error(err);\n    }\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"singlerecipepage\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"titlecard\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: recipe.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), Auth.loggedIn() ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddto,\n            enabled: true,\n            children: \"Add to Cookbook\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 29\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: true,\n            children: \"Add to Cookbook\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 29\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"generalInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Number of Servings: \", recipe.servings]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total Cook Time: \", recipe.totalTime]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Ingredients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ingredientsList\",\n        children: recipe.ingredients.map(ingredient => /*#__PURE__*/_jsxDEV(\"p\", {\n          children: ingredient\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Directions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"directionsList\",\n        children: recipe.directions.map(direction => /*#__PURE__*/_jsxDEV(\"p\", {\n          children: direction\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SingleRecipe, \"lpVOpoJQuzKHZpIF4oQgdLrscK0=\", false, function () {\n  return [useParams, useQuery, useMutation];\n});\n\n_c = SingleRecipe;\nexport default SingleRecipe;\n\nvar _c;\n\n$RefreshReg$(_c, \"SingleRecipe\");","map":{"version":3,"sources":["C:/Users/Justin/Desktop/Coding/mycookbook prototype/mycookbookver1/client/src/pages/SingleRecipe.js"],"names":["React","useParams","useQuery","useMutation","ADD_RECIPE","QUERY_SINGLE_RECIPE","QUERY_MYPROFILE","Auth","SingleRecipe","recipeId","loading","data","variables","recipe","addRecipe","error","update","cache","myprofile","readQuery","query","writeQuery","recipes","handleAddto","event","preventDefault","console","log","err","title","loggedIn","servings","totalTime","ingredients","map","ingredient","directions","direction"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport { useParams } from 'react-router-dom';\r\nimport { useQuery, useMutation } from '@apollo/client';\r\n\r\nimport { ADD_RECIPE } from '../utils/mutations';\r\nimport { QUERY_SINGLE_RECIPE, QUERY_MYPROFILE } from '../utils/queries';\r\n\r\nimport Auth from '../utils/auth';\r\n\r\nconst SingleRecipe = () => {\r\n    const { recipeId } = useParams();\r\n\r\n    const { loading, data } = useQuery(QUERY_SINGLE_RECIPE, {\r\n        variables: { recipeId: recipeId },\r\n    });\r\n    const recipe = data?.recipe || {};\r\n    // console.log(recipe)\r\n\r\n    // THIS SHOULD, ON PAPER ADD THE CURRENT OBJECT WHICH IS THE 'recipe'\r\n    // FROM ABOVE AND ADD TO THE USER THAT IS CURRENTLY LOGGED. THAT'S WHAT THE\r\n    // BELOW CODE SHOULD DO\r\n    const [addRecipe, { error }] = useMutation(ADD_RECIPE, {\r\n        update(cache, { data: { addRecipe } }) {\r\n\r\n            const { myprofile } = cache.readQuery({ query: QUERY_MYPROFILE });\r\n            cache.writeQuery({\r\n                query: QUERY_MYPROFILE,\r\n                data: { myprofile: {\r\n                    ...myprofile,\r\n                    recipes: [ ...myprofile.recipes, addRecipe]\r\n                }},\r\n            });\r\n        },\r\n    });\r\n\r\n    const handleAddto = async (event) => {\r\n        event.preventDefault();\r\n\r\n        try {\r\n            const { data } = await addRecipe({\r\n                variables: {\r\n                    recipe,\r\n                }\r\n            });\r\n\r\n            console.log(\"success\");\r\n        } catch (err) {\r\n            console.log(\"it didnt work\");\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n    return (\r\n        <div className=\"singlerecipepage\">\r\n            \r\n            <div>\r\n                <div className=\"titlecard\">\r\n                    <h1>{recipe.title}</h1>\r\n                    {Auth.loggedIn() ? (\r\n                        <>\r\n                            <button onClick={handleAddto} enabled>Add to Cookbook</button>\r\n                        </>\r\n                    ): (\r\n                        <>\r\n                            <button disabled>Add to Cookbook</button>\r\n                        </>\r\n                    )}\r\n                </div>\r\n                <div className=\"generalInfo\">\r\n                    <p>Number of Servings: {recipe.servings}</p>\r\n                    <p>Total Cook Time: {recipe.totalTime}</p>\r\n                </div>\r\n                <h1>Ingredients</h1>\r\n                <div className=\"ingredientsList\">\r\n                    {recipe.ingredients.map((ingredient) => (\r\n                        <p>{ingredient}</p>\r\n                    ))}\r\n                </div>\r\n                <h1>Directions</h1>\r\n                <div className=\"directionsList\">\r\n                    {recipe.directions.map((direction) => (\r\n                        <p>{direction}</p>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SingleRecipe;"]},"metadata":{},"sourceType":"module"}