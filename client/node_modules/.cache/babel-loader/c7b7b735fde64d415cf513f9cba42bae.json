{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Justin/Desktop/Coding/MyCookBook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Justin/Desktop/Coding/MyCookBook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Justin/Desktop/Coding/MyCookBook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Redirect,useParams,Link}from'react-router-dom';// IMPORTING EVERYTHING FOR QUERIES\nimport{useQuery}from'@apollo/client';import{QUERY_SINGLE_USER,QUERY_MYPROFILE}from'../utils/queries';// IMPORTING EVERYTHING FOR MUTATIONS\nimport{useMutation}from'@apollo/client';import{REMOVE_RECIPE}from'../utils/mutations';// IMPORTANT FOR THE USE OF CLOUDINARY\nimport{Image}from'cloudinary-react';import Auth from'../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){useEffect(function(){},[]);var _useParams=useParams(),userId=_useParams.userId;var _useQuery=useQuery(userId?QUERY_SINGLE_USER:QUERY_MYPROFILE,{variables:{userId:userId}}),loading=_useQuery.loading,data=_useQuery.data;var user=(data===null||data===void 0?void 0:data.myprofile)||(data===null||data===void 0?void 0:data.user)||{};var recipes=user.recipes;// console.log(user);\n// console.log(\"hi\");\n// console.log(recipes);\n// THESE NEXT LINES OF CODE SHOULD BE ABLE TO DELETE ANY RECIPES WITHIN\n// THE PROFILE PAGE WHICH MEANS ANY RECIPE HELD IN THE USERS RECIPES ARRAY\n// THIS TECHNICALLY SHOULD'T DELETE ANY DUPLICATES OR WHEN A USER ADDS ANOTHER\n// USERS RECIPE OR BASIALLY IT WONT DELETE THE ORIGINAL POST... I THINK\nvar _useMutation=useMutation(REMOVE_RECIPE),_useMutation2=_slicedToArray(_useMutation,1),removeRecipe=_useMutation2[0];// const [ recipeId, setRecipeID ] = useState('');\nvar handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var recipeId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();recipeId=event.target.id;console.log(recipeId);console.log(typeof recipeId);_context.prev=4;_context.next=7;return removeRecipe({variables:{recipeId:recipeId}});case 7:console.log(\"success recipe removed\");console.log();_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);console.error(_context.t0);console.log(\"it didnt work\");case 15:case\"end\":return _context.stop();}}},_callee,null,[[4,11]]);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();if(Auth.loggedIn()&&Auth.getProfile().data._id===userId){return/*#__PURE__*/_jsx(Redirect,{to:\"/myprofile\"});}if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!(user===null||user===void 0?void 0:user.username)){return/*#__PURE__*/_jsx(\"h4\",{className:\"profileloggedout\",children:\"You need to be logged in to see your profile page. Use the navigation links above to sign up or log in!\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"userprofilepage\",children:/*#__PURE__*/_jsx(\"div\",{className:\"usersrecipes\",children:recipes.map(function(recipe){return/*#__PURE__*/_jsxs(\"div\",{className:\"recipes\",children:[/*#__PURE__*/_jsx(Image,{cloudName:\"du119g90a\",public_id:recipe.imageid}),/*#__PURE__*/_jsxs(Link,{to:\"/recipes/\".concat(recipe._id),children:[/*#__PURE__*/_jsx(\"h3\",{children:recipe.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Servings: \",recipe.servings]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Time: \",recipe.totalTime]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"deletebutton\",children:/*#__PURE__*/_jsx(\"button\",{id:recipe._id,onClick:handleDelete,children:\"Remove\"})})]},recipe._id);})})});};export default Profile;","map":{"version":3,"sources":["C:/Users/Justin/Desktop/Coding/MyCookBook/client/src/pages/Profile.js"],"names":["React","useState","useEffect","Redirect","useParams","Link","useQuery","QUERY_SINGLE_USER","QUERY_MYPROFILE","useMutation","REMOVE_RECIPE","Image","Auth","Profile","userId","variables","loading","data","user","myprofile","recipes","removeRecipe","handleDelete","event","preventDefault","recipeId","target","id","console","log","error","loggedIn","getProfile","_id","username","map","recipe","imageid","title","servings","totalTime"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Redirect, useParams, Link } from 'react-router-dom';\r\n\r\n// IMPORTING EVERYTHING FOR QUERIES\r\nimport { useQuery } from '@apollo/client';\r\nimport { QUERY_SINGLE_USER, QUERY_MYPROFILE } from '../utils/queries';\r\n\r\n// IMPORTING EVERYTHING FOR MUTATIONS\r\nimport { useMutation } from '@apollo/client';\r\nimport { REMOVE_RECIPE } from '../utils/mutations';\r\n\r\n// IMPORTANT FOR THE USE OF CLOUDINARY\r\nimport { Image } from 'cloudinary-react';\r\n\r\nimport Auth from '../utils/auth';\r\n\r\nconst Profile = () => {\r\n\r\n    useEffect(() => {\r\n    }, []);\r\n\r\n    const { userId } = useParams();\r\n    const { loading, data } = useQuery(\r\n        userId ? QUERY_SINGLE_USER : QUERY_MYPROFILE,\r\n        {\r\n            variables: { userId: userId },\r\n        }\r\n    );\r\n    const user = data?.myprofile || data?.user || {};\r\n    const recipes = user.recipes;\r\n    // console.log(user);\r\n    // console.log(\"hi\");\r\n    // console.log(recipes);\r\n    \r\n    // THESE NEXT LINES OF CODE SHOULD BE ABLE TO DELETE ANY RECIPES WITHIN\r\n    // THE PROFILE PAGE WHICH MEANS ANY RECIPE HELD IN THE USERS RECIPES ARRAY\r\n    // THIS TECHNICALLY SHOULD'T DELETE ANY DUPLICATES OR WHEN A USER ADDS ANOTHER\r\n    // USERS RECIPE OR BASIALLY IT WONT DELETE THE ORIGINAL POST... I THINK\r\n    const [ removeRecipe ] = useMutation(REMOVE_RECIPE);\r\n    // const [ recipeId, setRecipeID ] = useState('');\r\n\r\n    const handleDelete = async (event) => {\r\n        event.preventDefault();\r\n        let recipeId = event.target.id;\r\n        console.log( recipeId );\r\n        console.log( typeof recipeId );\r\n\r\n        try {\r\n            await removeRecipe({\r\n                variables: { recipeId },\r\n            });\r\n\r\n            console.log(\"success recipe removed\");\r\n            console.log()\r\n        } catch (e) {\r\n            console.error(e);\r\n            console.log(\"it didnt work\");\r\n        }\r\n    }\r\n\r\n    if (Auth.loggedIn() && Auth.getProfile().data._id === userId) {\r\n        return <Redirect to=\"/myprofile\" />;\r\n    }\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    if (!user?.username) {\r\n        return (\r\n          <h4 className=\"profileloggedout\">\r\n            You need to be logged in to see your profile page. Use the navigation\r\n            links above to sign up or log in!\r\n          </h4>\r\n        );\r\n    }\r\n\r\n    return (\r\n            <div className=\"userprofilepage\">\r\n                <div className=\"usersrecipes\">\r\n                    {recipes.map((recipe) => (\r\n                        <div key={recipe._id} className=\"recipes\">\r\n\r\n                            <Image cloudName=\"du119g90a\" public_id={ recipe.imageid }/>\r\n                            \r\n                            <Link to={`/recipes/${recipe._id}`}>\r\n                                <h3>{ recipe.title }</h3>\r\n                                <p>Servings: { recipe.servings }</p>\r\n                                <p>Total Time: { recipe.totalTime }</p>\r\n                            </Link>\r\n                        {/* <div className=\"ingredientslist\">\r\n                            {recipe.ingredients.map((ingredient) => (\r\n                                <p>{ ingredient }</p>\r\n                            ))}    \r\n                        </div> */}\r\n                        <div className=\"deletebutton\">\r\n                            <button id={recipe._id} onClick={handleDelete}>Remove</button>                            \r\n                        </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>         \r\n    );\r\n    \r\n\r\n};\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}